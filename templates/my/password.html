<!DOCTYPE html>
<html lang="zh-cn" class="h-full">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>密码管理</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>

<body class="min-h-screen bg-cover bg-fixed bg-center bg-no-repeat text-gray-900">
<div class="flex min-h-screen flex-col">
    <main class="container mx-auto flex-grow px-4 py-8">
        <div class="mx-auto max-w-md rounded-xl bg-white/90 p-6 shadow-lg backdrop-blur-sm">
            {% if form_type == 'confirm' %}
                {% set action_url = url_for('my.confirm_password', user_id=user_id) %}
                {% set form_title = "身份验证" %}
                {% set btn_text = "确认身份" %}
            {% elif form_type == 'change' %}
                {% set action_url = url_for('my.change_password', user_id=user_id) %}
                {% set form_title = "修改密码" %}
                {% set btn_text = "提交修改" %}
            {% endif %}

            <form method="POST" action="{{ action_url }}" class="space-y-6">
                {{ form.csrf_token }}
                <h2 class="text-2xl font-bold text-gray-800">{{ form_title }}</h2>

                <div class="space-y-4">
                    {% if form_type == 'confirm' %}
                        <div>
                            <label class="mb-2 block text-sm font-medium text-gray-700">
                                需要输入当前密码确认身份
                                <input type="password" name="password" required
                                       class="mt-1 w-full rounded-lg border border-gray-300 px-4 py-2 transition focus:border-blue-500 focus:ring-2 focus:ring-blue-500">
                            </label>
                        </div>
                    {% else %}
                        <div>
                            <label class="mb-2 block text-sm font-medium text-gray-700">
                                新密码
                                <input type="password" name="new_password" required minlength="6"
                                       class="mt-1 w-full rounded-lg border border-gray-300 px-4 py-2 transition focus:border-blue-500 focus:ring-2 focus:ring-blue-500">
                            </label>
                        </div>
                        <div>
                            <label class="mb-2 block text-sm font-medium text-gray-700">
                                确认新密码
                                <input type="password" name="confirm_password" required
                                       class="mt-1 w-full rounded-lg border border-gray-300 px-4 py-2 transition focus:border-blue-500 focus:ring-2 focus:ring-blue-500">
                            </label>
                        </div>
                    {% endif %}
                </div>

                <button type="submit"
                        class="w-full rounded-lg bg-blue-600 px-4 py-2 font-medium text-white transition-colors hover:bg-blue-700">
                    {{ btn_text }}
                </button>
            </form>
        </div>
    </main>
</div>
</body>
</html>
